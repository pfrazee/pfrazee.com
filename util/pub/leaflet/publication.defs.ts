/*
 * THIS FILE WAS GENERATED BY "@atproto/lex". DO NOT EDIT.
 */

import { l } from '@atproto/lex'
import * as ThemeColor from './theme/color.defs.ts'
import * as ThemeBackgroundImage from './theme/backgroundImage.defs.ts'

const $nsid = 'pub.leaflet.publication'

export { $nsid }

/** Record declaring a publication */
type Main = {
  $type: 'pub.leaflet.publication'
  icon?: l.BlobRef
  name: string
  theme?: Theme
  base_path?: string
  description?: string
  preferences?: Preferences
}

export type { Main }

/** Record declaring a publication */
const main = l.record<'tid', Main>(
  'tid',
  $nsid,
  l.object({
    icon: l.optional(
      l.blob({ accept: ['image/*'], maxSize: 1000000, allowLegacy: false }),
    ),
    name: l.string({ maxLength: 2000 }),
    theme: l.optional(l.ref<Theme>((() => theme) as any)),
    base_path: l.optional(l.string()),
    description: l.optional(l.string({ maxLength: 2000 })),
    preferences: l.optional(l.ref<Preferences>((() => preferences) as any)),
  }),
)

export { main }

export const $isTypeOf = /*#__PURE__*/ main.isTypeOf.bind(main),
  $build = /*#__PURE__*/ main.build.bind(main),
  $type = /*#__PURE__*/ main.$type
export const $assert = /*#__PURE__*/ main.assert.bind(main),
  $ifMatches = /*#__PURE__*/ main.ifMatches.bind(main),
  $matches = /*#__PURE__*/ main.matches.bind(main),
  $parse = /*#__PURE__*/ main.parse.bind(main),
  $safeParse = /*#__PURE__*/ main.safeParse.bind(main)

type Theme = {
  $type?: 'pub.leaflet.publication#theme'
  primary?:
    | l.TypedRef<ThemeColor.Rgba>
    | l.TypedRef<ThemeColor.Rgb>
    | l.TypedObject
  accentText?:
    | l.TypedRef<ThemeColor.Rgba>
    | l.TypedRef<ThemeColor.Rgb>
    | l.TypedObject
  pageBackground?:
    | l.TypedRef<ThemeColor.Rgba>
    | l.TypedRef<ThemeColor.Rgb>
    | l.TypedObject
  backgroundColor?:
    | l.TypedRef<ThemeColor.Rgba>
    | l.TypedRef<ThemeColor.Rgb>
    | l.TypedObject
  backgroundImage?: ThemeBackgroundImage.Main
  accentBackground?:
    | l.TypedRef<ThemeColor.Rgba>
    | l.TypedRef<ThemeColor.Rgb>
    | l.TypedObject
  showPageBackground?: boolean
}

export type { Theme }

const theme = l.typedObject<Theme>(
  $nsid,
  'theme',
  l.object({
    primary: l.optional(
      l.typedUnion(
        [
          l.typedRef<ThemeColor.Rgba>((() => ThemeColor.rgba) as any),
          l.typedRef<ThemeColor.Rgb>((() => ThemeColor.rgb) as any),
        ],
        false,
      ),
    ),
    accentText: l.optional(
      l.typedUnion(
        [
          l.typedRef<ThemeColor.Rgba>((() => ThemeColor.rgba) as any),
          l.typedRef<ThemeColor.Rgb>((() => ThemeColor.rgb) as any),
        ],
        false,
      ),
    ),
    pageBackground: l.optional(
      l.typedUnion(
        [
          l.typedRef<ThemeColor.Rgba>((() => ThemeColor.rgba) as any),
          l.typedRef<ThemeColor.Rgb>((() => ThemeColor.rgb) as any),
        ],
        false,
      ),
    ),
    backgroundColor: l.optional(
      l.typedUnion(
        [
          l.typedRef<ThemeColor.Rgba>((() => ThemeColor.rgba) as any),
          l.typedRef<ThemeColor.Rgb>((() => ThemeColor.rgb) as any),
        ],
        false,
      ),
    ),
    backgroundImage: l.optional(
      l.ref<ThemeBackgroundImage.Main>(
        (() => ThemeBackgroundImage.main) as any,
      ),
    ),
    accentBackground: l.optional(
      l.typedUnion(
        [
          l.typedRef<ThemeColor.Rgba>((() => ThemeColor.rgba) as any),
          l.typedRef<ThemeColor.Rgb>((() => ThemeColor.rgb) as any),
        ],
        false,
      ),
    ),
    showPageBackground: l.optional(l.boolean({ default: false })),
  }),
)

export { theme }

type Preferences = {
  $type?: 'pub.leaflet.publication#preferences'
  showComments?: boolean
  showInDiscover?: boolean
}

export type { Preferences }

const preferences = l.typedObject<Preferences>(
  $nsid,
  'preferences',
  l.object({
    showComments: l.optional(l.boolean({ default: true })),
    showInDiscover: l.optional(l.boolean({ default: true })),
  }),
)

export { preferences }
